source files:
    ~/codebase/madminer/examples/ttbar2/ttbar_lr_multi.py
    ~/codebase/madminer/momemta/ttbar.cc
    ~/codebase/madminer/momemta/ttbar.lua

reproducing:
0. get the right environment 
    conda activate mm_vs_mem
    source /home/zbhatti/util/root_build/bin/thisroot.sh

1. run madminer script
    cd ~/codebase/madminer/examples/ttbar2
    python -u ttbar_lr_multi.py 2>&1 |tee smearing_1.out

2. export x_test.npy into x_test.csv
    python -c 'import numpy as np; x_test = np.load("/home/zbhatti/codebase/madminer/examples/ttbar2/data/samples/x_test_w_smearing.npy"); np.savetxt("/home/zbhatti/codebase/madminer/momemta/inputs/x_test_w_smearing.csv", x_test, delimiter=",")'

3. copy output and artifacts from madminer for analysis script
    cd ~/codebase/madminer/examples/ttbar2
    cp models/alice_* ../../momemta/inputs/alice_wo_smearing/
    cp data/samples/x_test_w_smearing.npy ../../momemta/inputs/

4. copy source and compile momemta
    cd ~/util/MoMEMta-1.0.0/build
    confirm source and lua files match experiment setup
    cp ~/codebase/madminer/momemta/ttbar.* ~/util/MoMEMta-1.0.0/examples/ && /opt/cmake-3.14.0-Linux-x86_64/bin/cmake -DPYTHON_BINDINGS=ON -DCMAKE_INSTALL_PREFIX=/home/zbhatti/util/ -DBOOST_ROOT=/home/zbhatti/util/MG5_aMC_v2_6_5/HEPTools/boost/boost_1_59_0/ -DBoost_DEBUG=ON -DEXAMPLES=ON .. && make -j4
    
5. run momemta
    cd ~/util/MoMEMta-1.0.0/build
    ./ttbar.exe ~/codebase/madminer/examples/ttbar2/data/miner_output_with_data.h5 ~/codebase/madminer/momemta/inputs/x_test_w_smearing.csv ~/codebase/madminer/momemta/weights11.csv 2>&1 |tee ~/codebase/madminer/momemta/log13.out

6. analysis script
    cd ~/codebase/madminer/momemta
    jupyter-notebook
    http://localhost:8888/notebooks/codebase/madminer/momemta/Momemta%20Ratios%20Analysis.ipynb
    update weights file created by momemta



For remote:
0. confirm madminer_runner.sh is running setup/generate/train as necessary
1. as yourself:
    git pull origin ttbar_multiple_theta
    conda activate python-mm-27
    cd /home/zb609/scratch_dir/madminer/examples/ttbar
    a. setup:
        ./madminer_runner.sh
    
    b. generate:
        sbatch --array 1-100 madminer_runner.sh few && sbatch --array 1-100 madminer_runner.sh many
    
    c. 


2. cp x_test.npy from hpc to local AND export x_test.npy to x_test.csv
    cd ~/codebase/madminer/momemta
    scp zb609@prince:~/scratch_dir/madminer_data/data/samples/x_test.npy inputs/
    python -c 'import numpy as np; x_test = np.load("/home/zbhatti/codebase/madminer/momemta/inputs/x_test.npy"); np.savetxt("/home/zbhatti/codebase/madminer/momemta/inputs/x_test.csv", x_test, delimiter=",")'

3. copy artifacts for analysis script from hpc to local
    cd ~/codebase/madminer/momemta
    scp zb609@prince:~/scratch_dir/madminer_data/models/alice_* inputs/alice_hpc/
    




- re-run ALL of madminer
- update forge.train steps and sa to utilize seperate validation.npy
- print observables from momemta or write them to a file (ie the lorentz vectors)

    
